<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/evil-icons/1.7.8/evil-icons.min.css">
        <script src="https://cdn.jsdelivr.net/evil-icons/1.7.8/evil-icons.min.js"></script>
        <link rel="stylesheet" href="index.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
    <body>
        <nav class="nav-bar" role='navigation'>
            <label for="checkbox" class="nav-bar__label">
                <div data-icon="ei-navicon" data-size="m"></div>
            </label>
            <input type="checkbox" name="checkbox" id="checkbox" class="nav-bar__label-control" />
            <ul class="nav-bar__menu-list">
                <li class="nav-bar__menu-item"><a href="#">Home</a></li>
                <li class="nav-bar__menu-item"><a href="#">Blog</a></li>
                <li class="nav-bar__menu-item"><a href="#">About</a></li>
                <li class="nav-bar__menu-item"><a href="#">Contact</a></li>
                <li class="nav-bar__menu-item"><a href="#">Home</a></li>
                <li class="nav-bar__menu-item"><a href="#">Blog</a></li>
                <li class="nav-bar__menu-item"><a href="#">About</a></li>
                <li class="nav-bar__menu-item"><a href="#">Contact</a></li>
                <li class="nav-bar__menu-item"><a href="#">Home</a></li>
                <li class="nav-bar__menu-item"><a href="#">Blog</a></li>
                <li class="nav-bar__menu-item"><a href="#">About</a></li>
                <li class="nav-bar__menu-item"><a href="#">Contact</a></li>
                <li class="nav-bar__menu-item"><a href="#">Home</a></li>
                <li class="nav-bar__menu-item"><a href="#">Blog</a></li>
                <li class="nav-bar__menu-item"><a href="#">About</a></li>
                <li class="nav-bar__menu-item"><a href="#">Contact</a></li>
                <li class="nav-bar__menu-item"><a href="#">Home</a></li>
                <li class="nav-bar__menu-item"><a href="#">Blog</a></li>
                <li class="nav-bar__menu-item"><a href="#">About</a></li>
                <li class="nav-bar__menu-item"><a href="#">Contact</a></li>
                <li class="nav-bar__menu-item"><a href="#">Home</a></li>
                <li class="nav-bar__menu-item"><a href="#">Blog</a></li>
                <li class="nav-bar__menu-item"><a href="#">About</a></li>
                <li class="nav-bar__menu-item"><a href="#">Contact</a></li>
            </ul>
        </nav>
        <section class="content">
            <section class="gallery">
                <a class="gallery__item" href="#1" style="background-image: url('http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg')">
                </a>
                <a class="gallery__item" href="#1" style="background-image: url('http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg')">
                </a>
                <a class="gallery__item" href="#2" style="background-image: url('http://placekitten.com.s3.amazonaws.com/homepage-samples/408/287.jpg')">
                </a>
                <a class="gallery__item" href="#" style="background-image: url('http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg')">
                </a>
                <a class="gallery__item" href="#" style="background-image: url('http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg')">
                </a>
                <a class="gallery__item" href="#" style="background-image: url('http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg')">
                </a>
                <a class="gallery__item" href="#" style="background-image: url('http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg')">
                </a>
                <a class="gallery__item" href="#" style="background-image: url('http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg')">
                </a>
            </section>
            <section class="posts">
                <div class="post" id="1">
                    <div class="post__header">
                        <span class="post__author">Анон</span>
                        <span class="post__date">08/12/15  13:08:39</span>
                        <span class="post__number">2555149</span>
                    </div>
                    <div class="post__body">
                        <div class="post__images">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/408/287.jpg" alt="">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                        </div>
                        <div class="post__message">йо</div>
                    </div>
                    <div class="post__footer">
                        Ответы:
                        <span class="post__reply">
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                        </span>
                    </div>
                </div>
                <div class="post" id="2">
                    <div class="post__header">
                        <span class="post__author">Анон</span>
                        <span class="post__date">08/12/15  13:08:39</span>
                        <span class="post__number">2555149</span>
                    </div>
                    <div class="post__body">
                        <div class="post__images">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                        </div>
                        <div class="post__message">йо</div>
                    </div>
                    <div class="post__footer">
                        Ответы:
                        <span class="post__reply">
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                        </span>
                    </div>
                </div>
                <div class="post">
                    <div class="post__header">
                        <span class="post__author">Анон</span>
                        <span class="post__date">08/12/15  13:08:39</span>
                        <span class="post__number">2555149</span>
                    </div>
                    <div class="post__body">
                        <div class="post__images">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                        </div>
                        <div class="post__message">йо</div>
                    </div>
                    <div class="post__footer">
                        Ответы:
                        <span class="post__reply">
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                        </span>
                    </div>
                </div>
                <div class="post">
                    <div class="post__header">
                        <span class="post__author">Анон</span>
                        <span class="post__date">08/12/15  13:08:39</span>
                        <span class="post__number">2555149</span>
                    </div>
                    <div class="post__body">
                        <div class="post__images">
                            <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" alt="">
                        </div>
                        <div class="post__message">йо</div>
                    </div>
                    <div class="post__footer">
                        Ответы:
                        <span class="post__reply">
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                            <a href="#" class="post__number">2555149</a>
                        </span>
                    </div>
                </div>
            </section>
        </section>
        <section class="lightbox">
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" class="lightbox__photo"></div>
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/408/287.jpg" class="lightbox__photo"></div>
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" class="lightbox__photo"></div>
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" class="lightbox__photo"></div>
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" class="lightbox__photo"></div>
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" class="lightbox__photo"></div>
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" class="lightbox__photo"></div>
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" class="lightbox__photo"></div>
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" class="lightbox__photo"></div>
            <div class="lightbox__photo-wrap"><img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/200/287.jpg" class="lightbox__photo"></div>
        </section>
    </body>
</html>
<script>
    var LightboxController = function () {
        var self = this;
        var lightbox = document.querySelector('.lightbox');
        var currentPhoto = 1;
        var prevScrollPosition = 0;
        var delta = Math.max(window.screen.width/4, 0);

        var scrollhandler = function (e) {
            var isScrollRight;
            if (prevScrollPosition - lightbox.scrollLeft < 0) {
                isScrollRight = true
            } else {
                isScrollRight = false;
            }
            console.log(isScrollRight);
            prevScrollPosition = lightbox.scrollLeft
            var nextState;
            var currentPhoto = Math.ceil(lightbox.scrollLeft/window.screen.width)
            var currentPhotoEnd = window.screen.width * currentPhoto;
            var currentPhotoStart = currentPhotoEnd - window.screen.width;

            if (isScrollRight) {
                if (lightbox.scrollLeft > currentPhotoStart + delta) {
                    nextState = 'next'
                }
            } else {
                if (lightbox.scrollLeft < currentPhotoEnd - delta) {
                    nextState = 'prev'
                }
                console.log(lightbox.scrollLeft, currentPhotoStart, currentPhotoEnd, delta);
            }

            switch (nextState) {
                case 'next':
                    lightbox.scrollLeft = currentPhotoEnd;
                    break;
                case 'prev':
                    lightbox.scrollLeft = currentPhotoStart;
                    break;
                default:
                    lightbox.scrollLeft = currentPhotoEnd;

            }

        }

        lightbox.addEventListener('scroll', scrollhandler)
    }
    var lightboxController = new LightboxController();
</script>
